{% extends 'polygon/polygon_base.jinja2' %}

{% block title %}Contests - {% endblock %}

{% block content %}

  <table class="ui celled table center aligned">
    <thead class="full-width">
      <tr>
        <th colspan="5">
          <div class="ui right floated buttons">
          {% set clone_message = "输入你想要复制的作业题库ID。该项目必须是作业集而不能是比赛，同时你必须拥有作业集的管理权限。复制作业集会复制包括作业起始时间、通知公告、题目列表在内的所有信息，但不包括参与者信息，您需要手动导入学生名单，以及修改起始时间和通知（如果必要）。" %}
            <button id="contest-create-button" class="ui right floated primary labeled icon button">
            <i class="server icon"></i> Add Contest
            </button>
            {% if user is admin %}
            <div class="ui primary floating dropdown icon button">
              <i class="dropdown icon"></i>
              <div class="menu">
                <a class="post ask item" data-link="{{ url('polygon:homework_clone') }}?force=1" data-question="{{ clone_message }}">复制历史作业集到新学期作业集</a>
              </div>
            </div>
            {% endif %}
          </div>
        </th>
      </tr>
      <tr>
        <th>Name</th>
        <th>Start</th>
        <th>End</th>
        <th>Public</th>
        <th>Standings</th>
      </tr>
    </thead>
    <tbody>
      {% for contest in contest_list %}
        <tr>
          <td><a href="{{ url('polygon:contest_meta', contest.id) }}">{{ contest.title }}</a></td>
          <td class="collapsing">{{ contest.start_time | date('Y-m-d H:i:s') }}</td>
          <td class="collapsing">{{ contest.end_time | date('Y-m-d H:i:s') }}</td>
          <td class="collapsing">{{ contest.access_level }}</td>
          <td class="collapsing">{{ contest.common_status_access_level }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <div class="ui basic tiny modal" id="contest-create">
    <div class="ui icon header">
      <i class="flag checkered icon"></i>
      Create a contest
    </div>
    <div class="content">
      <p>Are you sure you want to create a contest? You can not undo this.</p>
    </div>
    <div class="actions">
      <div class="ui red basic cancel inverted button">
        <i class="remove icon"></i>
        No
      </div>
      <a class="ui green ok inverted button post-link" data-link="{{ url('polygon:contest_create') }}">
        <i class="checkmark icon"></i>
        Yes
      </a>
    </div>
  </div>

{% endblock %}
